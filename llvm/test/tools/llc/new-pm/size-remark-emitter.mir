# REQUIRES: x86-registered-target

# RUN: llc -mtriple=x86_64-unknown-linux-gnu -filetype=null %s \
# RUN: -p dead-mi-elimination -pass-remarks-analysis='size-info' \
# RUN: -pass-remarks-output=%t.yaml < %s 2> %t; \
# RUN: cat %t %t.yaml | FileCheck %s

---
name:            test
body:             |
  bb.0:
    %1:gr64 = MOV64ri 0
    %2:gr64 = MOV64ri 0
    $eax = COPY %1
    RET64 implicit $eax
...

# CHECK: --- !Analysis
# CHECK: Pass:            size-info
# CHECK: Name:            FunctionMISizeChange
# CHECK: Function:        test
# CHECK: Args:
# CHECK:   - Pass:            DeadMachineInstructionElimPass
# CHECK:   - String:          ': Function: '
# CHECK:   - Function:        test
# CHECK:   - String:          ': '
# CHECK:   - String:          'MI Instruction count changed from '
# CHECK:   - MIInstrsBefore:  '4'
# CHECK:   - String:          ' to '
# CHECK:   - MIInstrsAfter:   '3'
# CHECK:   - String:          '; Delta: '
# CHECK:   - Delta:           '-1'
# CHECK: ...
